window.xin=function(){"use strict";var e={set:function(e,t){var i,n,r=this;if("xin."!==e.substr(0,4))throw new Error('Namespace not accepted, should be prefixed with "xin."');i=e.substr(4).split("."),n=i[i.length-1],_.each(i,function(e){r[e]=e===n?t:r[e]||{},r=r[e]})},htmlDecode:function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">")}};return window.jQuery?(e.when=jQuery.when,e.Deferred=jQuery.Deferred,e.$=jQuery):window.Zepto&&(Deferred.installInto(e),Zepto.Deferred||Deferred.installInto(Zepto),e.$=Zepto),window.Zepto&&(e.$.fn.detach=e.$.fn.remove),function(){e.$.fn.serializeObject=function(){var t={};return _.each(e.$(this).serializeArray(),function(e){t[e.name]=e.value}),t}}(),function(e){_.template=function(t,i){var n=e.apply(this,arguments);return i||(n.text=t),n}}(_.template),function(t){e.$.fn.attr=function(){if(0===arguments.length){if(0===this.length)return null;var i={};return e.$.each(this[0].attributes,function(){this.specified&&(i[this.name]=this.value)}),i}return t.apply(this,arguments)}}(e.$.fn.attr),e}(),function(e){"use strict";var t=(document.body,navigator.userAgent),i=~t.indexOf("iPhone")||~t.indexOf("iPod"),n=~t.indexOf("iPad"),r=i||n,s=window.navigator.standalone,a=~t.indexOf("Android"),o="mozRequestAnimationFrame"in window,l="webkitRequestAnimationFrame"in window,u={ua:t,iphone:i,ipad:n,ios:r,fullscreen:s,android:a,moz:o,webkit:l};u.TRANSITION_END="transitionend",l&&(u.TRANSITION_END="webkitTransitionEnd"),e.set("xin.detect",u);var d=e.$.fn.css;e.$.fn.css=function(t,i){if("string"==typeof t)switch(t){case"transform":case"transition":e.detect.moz&&d.call(this,"-moz-"+t,i),e.detect.webkit&&d.call(this,"-webkit-"+t,i)}return d.apply(this,arguments)}}(window.xin),function(e,t,i){"use strict";var n=function(){this.initialize.apply(this,arguments)};t.extend(n.prototype,i.Events,{initialize:function(i){var n=this;this.options=i=i||{},this.container=new e.IoC,this.container.app=this,this.router=i.router||new e.Router,this.router.app=this,i.middlewares&&t.each(i.middlewares,function(e){n.use(e)}),this.directiveManager=new e.DirectiveManager(this),i.directives&&e.$.each(i.directives,function(e,t){n.directiveManager.put(e,t)}),this.$el=e.$(i.el),this.$el.addClass("xin-app").attr("data-role","app"),this.providerRepository=new e.ProviderRepository(this),i.providers&&e.$.each(i.providers,function(e,t){n.providerRepository.add(t)}),e.app=e.app||this},remove:function(){this.$el.removeClass("xin-app").removeAttr("data-role")},start:function(){var t=this,n=e.Deferred();return this.baseURL=location.href.split("#")[0],this.catchAllHref(),e.when(this.providerRepository.initialize()).then(function(){return t.directiveManager.scan()}).done(function(){"function"==typeof t.router.start?t.router.start():i.history.start(),n.resolve()}),n.promise()},catchAllHref:function(){var t=this;this.$el.on("click","a",function(i){var n=e.$(this);if("external"!==n.data("rel")){var r=n.attr("href");if(r&&"#"!==r[0]){"/"===r[0]&&(r=location.origin+r),i.preventDefault(),r=t.simplifyURL(r);var s=r.split("#")[0]===location.href.split("#")[0]?"#_":"#"+r;location.hash=s}}}),this.$el.on("submit","form",function(n){document.activeElement&&document.activeElement.blur();var r=e.$(this),s=r.data("submit");"external"!==r.data("rel")&&(s&&(s=t.get(s)),n.preventDefault(),e.$.ajax({url:r.attr("action"),method:r.attr("method"),data:r.serialize()}).done(function(e,t,n){s&&s(null,e,n),i.trigger("form-success",r,e,t,n)}).fail(function(e,t,n){s&&s(t,n,e),i.trigger("form-error",r,e,t,n)}))})},simplifyURL:function(e){return 0===e.indexOf(this.baseURL)&&(e=e.substr(this.baseURL.length)),e},siteURL:function(e){return"/"===e[0]&&(e=e.substr(1)),this.baseURL+e},set:function(){this.container.set.apply(this.container,arguments)},get:function(){return this.container.get.apply(this.container,arguments)},resolve:function(){return this.container.resolve.apply(this.container,arguments)},use:function(e){if("string"==typeof e&&(e=this.get(e)),"function"==typeof e){var t=e;e=new t}if(!e)throw new Error("Middleware not found or instantiated!");this.router.use(e)}}),e.set("xin.App",n)}(window.xin,window._,window.Backbone),function(e){"use strict";var t=function(){this.initialize.apply(this,arguments)};_.extend(t.prototype,{context:{},fallbackContext:null,initialize:function(e){e=e||{},this.fallbackContext=e.fallbackContext||window,this.aliases={app:"xin.App",view:"xin.ui.Outlet",layout:"xin.ui.Layout",header:"xin.ui.Header",pane:"xin.ui.Pane",list:"xin.ui.List","list-item":"xin.ui.List.Item",drawer:"xin.ui.Drawer",navbar:"xin.ui.Navbar"}},clear:function(){this.context={},this.context.prototype=this.fallbackContext},get:function(e){if(!e){var t=$(".xin-show").data();if(t.instance)return t.instance;if(!t.id)return void console.error("IoC cannot get from key:",e);e=t.id}var i,n=e.split("."),r=this.context;return r=this.context,(i=_.every(n,function(e){return r=r[e]||void 0,void 0!==r}))?r:(r=this.fallbackContext,i=_.every(n,function(e){return r=r[e]||void 0,void 0!==r}),i?r:void 0)},set:function(e,t){if(!e)return void console.error("cannot set key:",e,"value:",t);{var i=e.split("."),n=this.context,r=0;_.each(i,function(e){r++,r==i.length?n[e]=t:(n[e]||(n[e]={}),n=n[e])})}},createObject:function(t,i){var n,r,s=e.Deferred(),a=i?i.id:null,o=[];for(var l in arguments)o.push(arguments[l]);switch(t.prototype instanceof Backbone.Collection||t.prototype instanceof Backbone.Model?o[0]=null:o=o.slice(1),o.length){case 0:n=new t;break;case 1:n=new t(o[0]);break;case 2:n=new t(o[0],o[1]);break;case 3:n=new t(o[0],o[1],o[2]);break;case 4:n=new t(o[0],o[1],o[2],o[3]);break;case 5:n=new t(o[0],o[1],o[2],o[3],o[4])}return n.app=this.app,a&&this.set(a,n),i.show&&(r=this.get(i.show),r&&"function"==typeof n.on&&n.on("show",r)),i.init&&(r=this.get(i.init),r.apply(n)),s.resolve(n),s.promise()},resolveAlias:function(e){var t;do t=!1,this.aliases[e]&&(e=this.aliases[e],t=!0);while(t);return e},resolve:function(i){var n,r,s,a="",o=e.Deferred(),l=[];if(i=this.resolveAlias(i),!i)return o.reject(new Error("Key not found or cannot resolve!")).promise();for(var u in arguments)l.push(arguments[u]);if("function"==typeof i)this.createObject.apply(this,l).then(o.resolve,o.reject);else if("string"==typeof i)if(n=i.indexOf(":"),n>=0&&(a=i.substr(0,n),i=i.substr(n+1)),a)try{r=t.getResolver(a),l[0]=i,r.apply(this,l).then(o.resolve,o.reject)}catch(d){o.resolve(i)}else{if(s=this.get(i),!s)throw new Error("Key: "+i+" not found!");if(s.xrole=i,"function"==typeof s){var c=_.last(i.split("."))[0];c.toUpperCase()==c?(l[0]=s,this.createObject(l[0],l[1]).then(o.resolve,o.reject)):o.resolve(s.apply(void 0,l.slice(1)))}else o.resolve(s)}else o.resolve(i);return o.promise()}}),_.extend(t,{resolvers:{xhr:function(t){return e.$.get(t).then(null,function(t,i,n){return e.Deferred().reject(new Error(n)).promise()}).promise()},template:function(i){if(i.indexOf("/")<0){var n=e.$("script#"+i);if(n.length>0)return e.Deferred().resolve(_.template(n.html())).promise()}var r=t.getResolver("xhr");return r(i).then(function(t){return e.Deferred().resolve(_.template(t))},null)},model:function(t){var i=e.Deferred();return e.when(this.resolve(t)).then(function(e){e instanceof Backbone.Model||(e=new Backbone.Model(e)),i.resolve(e)}),i.promise()},collection:function(t){var i=e.Deferred();return e.when(this.resolve(t)).then(function(e){e instanceof Backbone.Collection||(e=new Backbone.Collection(e)),i.resolve(e)}),i.promise()}},addResolver:function(e,t){this.resolvers[e]=t},getResolver:function(e){var t=this.resolvers[e];if("function"==typeof t)return t;if("object"==typeof t&&"function"==typeof t.resolve)return t.resolve;throw new Error("IoC Resolver ["+e+"] not found!")}}),e.set("xin.IoC",t)}(window.xin),function(e){"use strict";var t=function(){this.middlewares=[],Backbone.Router.apply(this,arguments)};_.extend(t.prototype,Backbone.Router.prototype,{routes:{"*splats":"routeMissing"},start:function(){Backbone.history.start()},registerView:function(e,t){this.viewRoutes[e]=t,(!this.viewDefaultRoute||t.data("uri-default"))&&(this.viewDefaultRoute=e)},routeMissing:function(t){t=(t||"").trim();var i=t.split("?");t=i[0];var n=this,r=this.app.simplifyURL(t);if(t!==r)return void(location.hash=r);var s=n.viewRoutes[t],a=function(){s=e.$(".xin-pane > .xin-view"),n.viewDefaultRoute="_",s.attr("data-uri","_"),n.registerView("_",s)};s||"_"!=t||a(),""===t?(n.viewDefaultRoute||a(),location.hash=n.viewDefaultRoute):s?e.ui.show(s.data("instance")):e.$.get(t).done(function(i){i=i.trim(),i.indexOf("<body")>=0?(i=i.substr(i.indexOf("<body")+1),i="<div>"+i.substr(i.indexOf(">")+1)+"</div>"):i.indexOf("<BODY")>=0?(i=i.substr(i.indexOf("<BODY")+1),i="<div>"+i.substr(i.indexOf(">")+1)+"</div>"):i="<div>"+i+"</div>";var r=e.$(i),s=r.find("[data-role=pane] > [data-role]");s.length>0?(r=s,r.attr("data-uri",t)):(r.find("body").length>0&&(r=r.find("body")),i=r.html()||"",r=e.$('<div data-role="view" data-uri="'+t+'">'+i+"</div>")),n.mainViewport.append(r),e.when(n.app.directiveManager.scan()).done(function(){n.routeMissing(t)})}).fail(function(){console.error('Missing route for URI: "'+t+'"')})},show:function(e){e&&("function"==typeof e.show?e.show():e.$el.addClass("hz-show"))},route:function(e){var t,i=[],n=this;if(arguments.length>1)for(var r=1;r<arguments.length;r++)i.push(t=arguments[r]);"string"==typeof t&&(t=this[t]),Backbone.Router.prototype.route.call(this,e,function(){var e=arguments;n.runMiddleware.call(n,t.options||{}).done(function(){t.apply(n,e)})})},use:function(e){e.app=this.app,this.middlewares.push(e)},runMiddleware:function(t){var i=(this.app,null);return _.each(this.middlewares,function(e){i=i?i.then(function(){return e.call(t)}):e.call(t)}),i||(i=e.Deferred().resolve().promise()),i}}),e.set("xin.Router",t)}(window.xin),function(e){"use strict";var t=function(e){this.app=e,this.directives={}};_.extend(t.prototype,{put:function(e,t){if(!t)throw new Error('Directive for "'+e+'" not found or invalid!');if("function"==typeof t){var i=t;t=new i(this.app)}this.directives[e]=t},scan:function(t){var i,n=this,r=[],s=new e.Deferred,a=function(){r=[],t.children().each(function(){var t=e.$(this);r.push(n.scan(t))}),e.$.when.apply(null,r).done(function(){s.resolve()})},o=function(i){return function(n){return n?(a(),e.Deferred().reject().promise()):i.run(t)}};return t=t||this.app.$el,_.each(this.directives,function(e){e.matcher(t)&&(i=i?i.then(o(e)):e.run(t))}),i||(i=e.Deferred().resolve().promise()),i.done(a),s.promise()}}),e.set("xin.DirectiveManager",t)}(window.xin),function(e){"use strict";var t=function(e){this.app=e,this.providers=[]};_.extend(t.prototype,{add:function(e){if(!e)throw new Error("Provider not found or invalid!");if("function"==typeof e){var t=e;e=new t}this.providers.push(e)},initialize:function(){var t=this.app,i=null;return _.each(this.providers,function(e){i=i?i.then(function(){return e.initialize(t)}):e.initialize(t)}),i||(i=e.Deferred().resolve().promise()),i}}),e.set("xin.ProviderRepository",t)}(window.xin),function(e){var t=function(e,t){this.$el=e,this.to=t,this.timeout=.3};_.extend(t.prototype,{play:function(){var t=this,i=e.Deferred();this.$el.on(e.detect.TRANSITION_END,function(){t.$el.off(e.detect.TRANSITION_END),t.$el.css("transition",""),t.$el.css("transform",""),i.resolve()});var n="100%";return"right"==this.to&&(n="-"+n),this.$el.css("transform","translate3d("+n+", 0, 0)"),this.$el.css("transition","all "+t.timeout+"s"),t.$el.addClass("xin-show"),setTimeout(function(){t.$el.css("transform","translate3d(0, 0, 0)")},e.fx.defaultOptions.delay),i.promise()}});var i=function(e,t){this.$el=e,this.to=t,this.timeout=.3};_.extend(i.prototype,{play:function(){var t=this,i=e.Deferred();return this.$el.on(e.detect.TRANSITION_END,function(){t.$el.off(e.detect.TRANSITION_END),t.$el.removeClass("xin-show"),t.$el.css("transition",""),t.$el.css("transform",""),i.resolve()}),this.$el.css("transform","translate3d(0, 0, 0)"),this.$el.css("transition","all "+t.timeout+"s"),setTimeout(function(){var e="100%";"left"==t.to&&(e="-"+e),t.$el.css("transform","translate3d("+e+", 0, 0)")},e.fx.defaultOptions.delay),i.promise()}}),e.set("xin.fx",{defaultOptions:{delay:50},SlideIn:t,SlideOut:i})}(window.xin),function(e){"use strict";var t=!0;e.set("xin.ui",{isFirstRender:function(){var e=t;return e&&(t=!1),e},show:function(e){Backbone.trigger("xin-show",e),_.defer(function(){e.parent&&e.parent.showChild?e.parent.showChild(e).done(function(){e.$el[0].scrollTop=0,e.$el.addClass("xin-show")}):e.$el.addClass("xin-show"),e.trigger("show",e)})}})}(window.xin),function(e){"use strict";var t=function(e){this.app=e};_.extend(t.prototype,{matcher:function(e){return e.data("role")&&"app"===e.data("role").toLowerCase()},run:function(t){var i=e.Deferred();return t.attr("data-instantiated",!0).addClass("xin-role").data("instance",this.app),i.resolve(),i.promise()}}),e.set("xin.directive.AppDirective",t)}(window.xin),function(e){"use strict";var t=function(e){this.app=e};_.extend(t.prototype,{matcher:function(e){return e.data("role")&&"app"!==e.data("role").toLowerCase()?!0:void 0},run:function(t){var i,n,r=[],s=new e.Deferred,a=this.app;return t.data("instantiated")?s.resolve().promise():(i=_.defaults(t.data(),{el:t,app:a}),n=i.role,delete i.role,_.each(i,function(e,t){if("string"==typeof e){e=t+":"+e;var n=a.resolve(e).then(function(e){i[t]=e});r.push(n)}}),e.when.apply(null,r).done(function(){a.resolve(n,i).done(function(t){var i,r;if(!t)throw new Error('Role: "'+n+'" undefined');if(i=t.$el,i&&(r=i.parent(".xin-role"),i.attr("data-instantiated",!0).data("instance",t).addClass("xin-role"),t.cid&&i.attr("data-cid",t.cid),r.length)){var a=r.data("instance");a.addChild&&a.addChild(t)}t.onReady?e.when(t.onReady()).then(s.resolve):s.resolve()}).fail(function(){console.log(arguments)})}),s.promise())}}),e.set("xin.directive.RoleDirective",t)}(window.xin),function(e){var t=function(e){this.app=e,this.router=e.router,this.router.viewRoutes=e.router.viewRoutes||{},this.router.viewDefaultRoute=null};_.extend(t.prototype,{matcher:function(e){return e.data("uri")},run:function(t){var i=e.Deferred(),n=t.data("uri");return this.router.registerView(n,t),i.resolve().promise()}}),e.set("xin.directive.URIDirective",t)}(window.xin),function(e){"use strict";var t=function(e){this.app=e,this.binding=[]};_.extend(t.prototype,{newRef:function(){return this.ref=this.ref||0,"bind-"+this.ref++},matcher:function(e){return e.data("bind")},onChanged:function(t,i){t.$("[data-bind-key]").each(function(){var t=e.$(this),n=t.data(),r=i.get(n.bindKey),s=n.bindKey.split("."),a=window.Backbone.Model.extend({});if(s.length>1)for(var o in s)r="0"===o?new a(i.get(s[o])):r.get(s[o]);if(0===n.bindTo.indexOf("attr-")){var l=n.bindTo.substr(5);t.attr(l,r)}else"INPUT"===t[0].tagName?"checkbox"===t.attr("type")||"radio"===t.attr("type")?t.attr("checked",r||!1):t.val(r):t.html(r)})},run:function(t){var i=e.Deferred(),n=this.app,r=this;if(t.data("bindRef"))return i.resolve().promise();var s=t.hasClass("xin-role")?t:t.parents(".xin-role:not(.xin-layout)"),a=s.data("instance"),o=t.data("bind").trim().split(/\s+/);return _.each(o,function(e){var i,s,o;e=e.split(":"),1===e.length&&(e[1]=e[0],e[0]="val"),"val"==e[0]||0===(e[0]||"").indexOf("attr-")?(r.binding[a.cid]=r.binding[a.cid]||[],a&&a.model&&(s=r.newRef(),t.attr("data-bind-ref",s).attr("data-bind-to",e[0]).attr("data-bind-key",e[1]),o=_.bind(function(){var e=t.val();("checkbox"==t.attr("type")||"radio"==t.attr("type"))&&(e=t.attr("checked")?!0:!1),this.model.set(t.data("bindKey"),e)},a),a.model.on("change",_.partial(r.onChanged,a)),a.events=_.result(a,"events")||{},a.events["change [data-bind-ref="+s+"]"]=o,a.delegateEvents())):(i=e[0],o=e[1],o=a&&a[o]?a[o]:r.app.get(o),_.isFunction(o)&&(s=r.newRef(),t.attr("data-bind-ref",s),a&&a.delegateEvents?(a.events=_.result(a,"events")||{},a.events[i+" [data-bind-ref="+s+"]"]=o,a.delegateEvents()):n.$el.on(i,"[data-bind-ref="+s+"]",o)))}),i.resolve(),i.promise()}}),e.set("xin.directive.BindDirective",t)}(window.xin),function(e){"use strict";var t=function(){this.initialize.apply(this,arguments)};_.extend(t.prototype,{$:function(e){return this.$el.find(e)},initialize:function(t){{var i,n;t.app}this.id=t.id=t.id||"default",this.app=t.app,delete t.id,n=this.$views={},this.$el=i=e.$(t.el),i.addClass("xin-layout"),this.$el.find("[data-region]").addClass(function(){return"xin-region xin-region-"+e.$(this).data("region")}),this.$el.find("[data-role]").each(function(){var t=e.$(this),i=t.data("role");n[i]=t})},initTo:function(e){var t=this.$el.clone();t.find(".xin-region-body").html(e.$el.html()),e.$el.html(t.html()).addClass(t.attr("class")).removeClass("xin-layout")},applyTo:function(t){var i=this.$views;t.$(".xin-region").each(function(){var t=e.$(this);"body"!=t.data("region")&&t.find(".xin-role").each(function(){var t=e.$(this),n=t.data("role"),r=i[n].data("instance");t.data("instance",r),r.setElement(t)})}),t.$el.data("title")&&t.$("[data-region=title]").html(t.$el.data("title"))}}),e.set("xin.ui.Layout",t),Backbone.on("xin-show",function(e){if(e.$el.data("layout")){var t=e.app.get(e.$el.data("layout"));t&&t.applyTo(e)}})}(window.xin),function(e){"use strict";var t=Backbone.View.extend({events:{"submit form.searchForm":"submitSearch"},initialize:function(e){var t,i=e.app;if(this.template=e.template||null,e.layout&&(t=i.get(e.layout),t&&t.initTo(this)),this.$el.addClass("xin-view"),this.render){var n=_.debounce(_.bind(this.render,this),100,!1);this.model&&(this.listenTo(this.model,"change",n),this.listenTo(this.model,"destroy",n)),n()}},render:function(){return this.template&&(this.$el.html(this.template(this)),this.app.directiveManager.scan(this.$el)),this.trigger("rendered"),this}}),i=Backbone.View.extend({events:{"click .showDrawer":"showDrawer",'click [data-role="navbar"] .more':"moreMenu",'click [data-role="navbar"] .search':"showSearchBox",'click [data-region="body"]':"bodyClicked","submit form.searchForm":"submitSearch"},submitSearch:function(e){var t=$(e.target).serializeObject();return""===t.search.trim()?(alert("Searh is required."),!1):(this.search(t.search.trim()),!1)},search:function(e){console.log(e)},bodyClicked:function(){this.$el.find(".navbar").removeClass("hide"),this.$el.find(".searchBox").addClass("hide"),this.$el.find(".moreMenu").addClass("hide")},showSearchBox:function(){this.$el.find(".navbar").addClass("hide"),this.$el.find(".searchBox").removeClass("hide"),this.$el.find('form.searchForm input[name="search"]').val(null),this.$el.find('form.searchForm input[name="search"]').focus()},moreMenu:function(){this.$el.find(".moreMenu").hasClass("hide")?this.$el.find(".moreMenu").removeClass("hide"):this.$el.find(".moreMenu").addClass("hide")},showDrawer:function(){return e.$(".xin-drawer").data("instance").show(),!1},initialize:function(e){var t,i=e.app;if(this.template=e.template||null,e.layout&&(t=i.get(e.layout),t&&t.initTo(this)),this.$el.addClass("xin-view"),this.render){var n=_.debounce(_.bind(this.render,this),100,!1);this.model&&(this.listenTo(this.model,"change",n),this.listenTo(this.model,"destroy",n)),n()}},render:function(){return this.template&&(this.$el.html(this.template(this)),this.app.directiveManager.scan(this.$el)),this.trigger("rendered"),this}});e.set("xin.ui.Outlet",t),e.set("xin.ui.View",i)}(window.xin),function(e){"use strict";var t=Backbone.View.extend({}),i=t.extend({initialize:function(e){this.constructor.__super__.initialize.apply(this,arguments),this.transition=e.transition||"plain",this.activePage=null,this.pages={},(!e.app.router.mainViewport||e.mainViewport)&&(e.app.router.mainViewport=this.$el),this.$el.addClass("xin-pane")},addChild:function(e){var t={};return t[e.cid]=e,_.extend(this.pages,t),this.pageKeys=_.keys(this.pages),this.pageValues=_.values(this.pages),e.parent=this,this},showChild:function(t){var i=-1,n=-1,r=e.Deferred();return this.activePage==t?r.resolve().promise():(t&&(i=_.indexOf(this.pageValues,t)),this.activePage&&(n=_.indexOf(this.pageValues,this.activePage)),this.$el.scrollTop(0),e.ui.Pane.transitions[this.transition](this,t,this.activePage,n-i).done(r.resolve),this.activePage=t,r.promise())}});_.extend(i,{transitions:{plain:function(t,i,n){var r=e.Deferred();return n&&n.$el.removeClass("xin-show"),i.$el.addClass("xin-show"),r.resolve(),r.promise()},slide:function(t,i,n,r){var s,a,o,l=e.Deferred();s=0>r?"left":"right";var u=function(){e.$(this).removeClass("xin-show"),_.defer(l.resolve)};if(n){if(i&&(a=new e.fx.SlideIn(i.$el,s)),n&&(o=new e.fx.SlideOut(n.$el,s)),a){var d=a.play();o||d.then(u)}o&&o.play().then(u)}else u();return l.promise()}}}),e.set("xin.ui.Container",t),e.set("xin.ui.Pane",i)}(window.xin),function(e){"use strict";var t=e.ui.Outlet.extend({initialize:function(t){if(this.$el.addClass("xin-list"),this.app=t.app,this.collection){var i,n;if(t.template)t.template.text?i=t.template.text:(this.itemTemplate=t.template,this.itemAttributes=[],this.itemTagName="li");else{var r=this.$(">template");r.length<=0&&(r=this.$('>script[type="text/template"]')),i=r.html(),i||(this.itemTemplate=_.template("<%= model %>"),this.itemAttributes=[],this.itemTagName="li")}i&&(n=e.$(i),this.itemAttributes=n.attr(),this.itemTemplate=_.template(e.htmlDecode(n.html())),this.itemTagName=n[0].tagName.toLowerCase()),this.itemAttributes["data-role"]=this.itemAttributes["data-role"]||"list-item",this.listenTo(this.collection,"reset",this.reset),this.listenTo(this.collection,"sort",this.reset),this.listenTo(this.collection,"add",this.add),this.listenTo(this.collection,"remove",this.remove),this.reset()}},reset:function(){var e=this;this.$el.html(""),_.each(this.collection.models,function(t){e.add(t)})},add:function(t){var i=e.$("<"+this.itemTagName+"/>").attr(this.itemAttributes).data({template:this.itemTemplate,model:t}).addClass("xin-list-item");this.$el.append(i),this.app.directiveManager.scan(i)},remove:function(){}});t.Item=e.ui.Outlet.extend({}),e.set("xin.ui.List",t)}(window.xin),function(e){"use strict";var t=e.ui.Outlet.extend({initialize:function(){this.constructor.__super__.initialize.apply(this,arguments),this.$el.addClass("xin-drawer"),this.$el.on("click","a",_.bind(this.clicked,this)),$(document).on("mouseup",_.bind(this.mouseUp,this))},show:function(){var e=this.$el.siblings();e.css("-webkit-transition","all .3s"),e.css("-webkit-transform","translateX(80%)")},hide:function(){var e=this.$el.siblings();e.css("-webkit-transition","all .3s"),e.css("-webkit-transform","translateX(0)")},mouseUp:function(e){var t=$("[data-layout=drawer]");t.is(e.target)||0!==t.has(e.target).length||this.hide()},clicked:function(){this.hide()}});e.set("xin.ui.Drawer",t)}(window.xin),function(e){"use strict";var t=e.ui.Outlet.extend({initialize:function(){this.constructor.__super__.initialize.apply(this,arguments),this.$el.addClass("xin-navbar")}});e.set("xin.ui.Navbar",t)}(window.xin);